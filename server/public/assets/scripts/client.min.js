var myApp=angular.module("myApp",["ngRoute","ngAnimate","ui.bootstrap","smart-table"]);myApp.config(["$routeProvider","$locationProvider",function(a,b){a.when("/",{templateUrl:"assets/views/templates/home.html",controller:"HomeController"}).when("/querys",{templateUrl:"assets/views/routes/querys.html",controller:"queryController"}).otherwise({redirectTo:"/"}),b.html5Mode(!0)}]),myApp.controller("AddUserController",["$scope","UserService",function(a,b){console.log("AddUserController Works!");var c=b;a.addUser={},a.submit=function(a){console.log("@mainController.js AddUserController data (AKA: addUser: ",a),c.newUser(a)}}]),myApp.controller("AddGoalsController",["$scope","GoalService",function(a,b){console.log("HI, @CONTROLLER - AddGoalsController Works!");var c=b;a.months=["september","october","november","december","january","february","march","april","may","june","july","august"],a.addGoals={},a.saveGoals=function(a){console.log("@goalController.js data (AKA: addGoals: ",a),c.newGoals(a)}}]),myApp.controller("HomeController",["$scope","$filter","MockService",function(a,b,c){var d=c;a.rowCollection=[],a.itemsByPage=15,a.accounts=[],a.donations=[],a.campaigns=[],a.contacts=[],a.households=[],a.contacts=d.contacts,d.getContacts()}]),myApp.controller("MainController",["$scope","UserService",function(a,b){}]),myApp.controller("QueryController",["$scope","QueryService",function(a,b){console.log("QueryControllerWorks"),a.data=[],a.forceData=[],a.forceresponse=[];b.getSalesforce(),a.data=b.data,a.forceData=b.forceData,console.log("forcedata",b.forceData),console.log("forcedata arrResults",b.forceData.arrResults),a.forceresponse=b.forceresponse}]),myApp.controller("UserController",["$scope","$http","$window",function(a,b,c){a.userName="",b.get("/user").then(function(b){b.data?(a.userName=b.data.username,console.log("User Data: ",a.userName)):c.location.href="/index.html"})}]),myApp.factory("GoalService",["$http",function(a){var b=function(a){console.log("*@FACTORY goalService, newGoals(addGoals): ",a)};return{newGoals:b}}]),myApp.factory("MockService",["$http",function(a){var b={},c={},d={},e={},f={},g=function(){return a.get("mockData/accounts").then(function(a){b.object=a.data,console.log("accounts in factory get",b.object)})},h=function(){return a.get("mockData/contacts").then(function(a){d.object=a.data,console.log("contacts in factory get",d.object)})},i=function(){return a.get("mockData/campaigns").then(function(a){c.object=a.data,console.log("campaigns in factory get",c.object)})},j=function(){return a.get("mockData/donations").then(function(a){e.object=a.data,console.log("donations in factory get ",e.object)})},k=function(){return a.get("mockData/households").then(function(a){f.object=a.data,console.log("households in factory get",f.object)})};return{getAccounts:g,getCampaigns:i,getContacts:h,getDonations:j,getHouseholds:k,accounts:b,contacts:d,donations:e,campaigns:c,households:f}}]),myApp.factory("QueryService",["$http",function(a){var b={},c={},d={},e=[],f=[],g=0,h="",i=new Date("12-31-2015"),k=new Date,l=new Date,m=new Date,n=new Date,o=new Date,p=new Date,q=new Date,r=new Date,s=new Date,t=new Date,u=new Date,v=new Date,w=new Date,y=new Date,z=new Date,A=new Date,B=new Date,C=new Date;l=new Date(i),k=new Date("09/01/"+i.getFullYear()),k>l&&(k=new Date("09/01/"+(i.getFullYear()-1))),m=new Date(k),m.add({years:-1}),o=new Date(k),o.add({years:-2}),q=new Date(k),q.add({years:-3}),s=new Date(k),s.add({years:-4}),n=new Date(l),n.add({years:-1}),p=new Date(l),p.add({years:-2}),r=new Date(l),r.add({years:-3}),t=new Date(l),t.add({years:-4}),v=new Date("08/31/"+i.getFullYear()),v>i&&(v=new Date("08/31/"+(i.getFullYear()-1))),y=new Date(v),y.add({years:-1}),A=new Date(v),A.add({years:-2}),C=new Date(v),C.add({years:-3}),u=new Date(m),w=new Date(o),z=new Date(q),B=new Date(s),i=i.toFormat("YYYY-MM-DD"),k=k.toFormat("YYYY-MM-DD"),l=l.toFormat("YYYY-MM-DD"),m=m.toFormat("YYYY-MM-DD"),n=n.toFormat("YYYY-MM-DD"),o=o.toFormat("YYYY-MM-DD"),p=p.toFormat("YYYY-MM-DD"),q=q.toFormat("YYYY-MM-DD"),r=r.toFormat("YYYY-MM-DD"),s=s.toFormat("YYYY-MM-DD"),t=t.toFormat("YYYY-MM-DD"),u=u.toFormat("YYYY-MM-DD"),v=v.toFormat("YYYY-MM-DD"),w=w.toFormat("YYYY-MM-DD"),y=y.toFormat("YYYY-MM-DD"),z=z.toFormat("YYYY-MM-DD"),A=A.toFormat("YYYY-MM-DD"),B=B.toFormat("YYYY-MM-DD"),C=C.toFormat("YYYY-MM-DD"),console.log("selEndDate",i),console.log("ytdStart",k),console.log("ytdEnd",l),console.log("ytdM1Start",m),console.log("ytdM1End",n),console.log("ytdM2Start",o),console.log("ytdM2End",p),console.log("ytdM3Start",q),console.log("ytdM3End",r),console.log("ytdM4Start",s),console.log("ytdM4End",t),console.log("fyM1Start",u),console.log("fyM1End",v),console.log("fyM2Start",w),console.log("fyM2End",y),console.log("fyM3Start",z),console.log("fyM3End",A),console.log("fyM4Start",B),console.log("fyM4End",C);var D="";D="a1",h="SELECT Donation_SubCategory__c, SUM(Amount) FROM  Opportunity WHERE StageName = 'Posted' AND Amount != null AND CloseDate >= "+k+" AND CloseDate <="+l+"  GROUP BY Donation_SubCategory__c ",sqlObj={key:D,query:"money raised YTD START AND END RATE this is NEW SPARTA",sql:h},f.push(sqlObj),D="a2",h="SELECT Donation_SubCategory__c, SUM(Amount) FROM  Opportunity WHERE StageName = 'Posted' AND Amount != null AND CloseDate >= "+m+" AND CloseDate <="+n+"  GROUP BY Donation_SubCategory__c ",sqlObj={key:D,query:"year -1 money raised YTD START AND END RATE this is NEW SPARTA",sql:h},f.push(sqlObj),D="a3",h="SELECT Donation_SubCategory__c, SUM(Amount) FROM  Opportunity WHERE StageName = 'Posted' AND Amount != null AND CloseDate >= "+o+" AND CloseDate <="+p+"  GROUP BY Donation_SubCategory__c ",sqlObj={key:D,query:"year -2 money raised YTD START AND END RATE this is NEW SPARTA",sql:h},f.push(sqlObj),D="a4",h="SELECT Donation_SubCategory__c, SUM(Amount) FROM  Opportunity WHERE StageName = 'Posted' AND Amount != null AND CloseDate >= "+u+" AND CloseDate <="+v+"  GROUP BY Donation_SubCategory__c ",sqlObj={key:D,query:"First Fiscal YEar before select date",sql:h},f.push(sqlObj),D="a5",h="SELECT Donation_SubCategory__c, SUM(Amount) FROM  Opportunity WHERE StageName = 'Posted' AND Amount != null AND CloseDate >= "+w+" AND CloseDate <="+y+"  GROUP BY Donation_SubCategory__c ",sqlObj={key:D,query:"SECOND Fiscal YEar before select date",sql:h},f.push(sqlObj),D="b1",h="SELECT  SUM(Amount) FROM  Opportunity WHERE StageName = 'Posted' AND Amount != null AND CloseDate >= "+k+" AND CloseDate <="+l,sqlObj={key:D,query:"TOTAL amount for ytd selected",sql:h},f.push(sqlObj),D="b2",h="SELECT  SUM(Amount) FROM  Opportunity WHERE StageName = 'Posted' AND Amount != null AND CloseDate >= "+m+" AND CloseDate <="+n,sqlObj={key:D,query:"TOTAL amount for ytd selected -1",sql:h},f.push(sqlObj),D="b3",h="SELECT  SUM(Amount) FROM  Opportunity WHERE StageName = 'Posted' AND Amount != null AND CloseDate >= "+o+" AND CloseDate <="+p,sqlObj={key:D,query:"TOTAL amount for ytd selected -2",sql:h},f.push(sqlObj),D="b4",h="SELECT  SUM(Amount) FROM  Opportunity WHERE StageName = 'Posted' AND Amount != null AND CloseDate >= "+u+" AND CloseDate <="+v,sqlObj={key:D,query:"TOTAL amount for First full fiscal year before selected",sql:h},f.push(sqlObj),D="b5",h="SELECT  SUM(Amount) FROM  Opportunity WHERE StageName = 'Posted' AND Amount != null AND CloseDate >= "+w+" AND CloseDate <="+y,sqlObj={key:D,query:"TOTAL amount for Second full fiscal year before selected",sql:h},f.push(sqlObj),D="c1",h="SELECT  COUNT(Id) FROM Opportunity WHERE StageName = 'Posted' AND RecordTypeID = '012800000002KPtAAM' GROUP BY AccountId HAVING MIN(CloseDate) >= "+k+" AND MIN(CloseDate) <= "+l,sqlObj={key:D,query:"first time donors  YTD SELECTED",sql:h},f.push(sqlObj),D="c2",h="SELECT  COUNT(Id) FROM Opportunity WHERE StageName = 'Posted' AND RecordTypeID = '012800000002KPtAAM' GROUP BY AccountId HAVING MIN(CloseDate) >= "+m+" AND MIN(CloseDate) <= "+n,sqlObj={key:D,query:"first time donors  YTD SELECTED -1",sql:h},f.push(sqlObj),D="c3",h="SELECT  COUNT(Id) FROM Opportunity WHERE StageName = 'Posted' AND RecordTypeID = '012800000002KPtAAM' GROUP BY AccountId HAVING MIN(CloseDate) >= "+o+" AND MIN(CloseDate) <= "+p,sqlObj={key:D,query:"first time donors  YTD SELECTED -2",sql:h},f.push(sqlObj),D="c4",h="SELECT  COUNT(Id) FROM Opportunity WHERE StageName = 'Posted' AND RecordTypeID = '012800000002KPtAAM' GROUP BY AccountId HAVING MIN(CloseDate) >= "+u+" AND MIN(CloseDate) <= "+v,sqlObj={key:D,query:"first time donors  First FY before selected",sql:h},f.push(sqlObj),D="c5",h="SELECT  COUNT(Id) FROM Opportunity WHERE StageName = 'Posted' AND RecordTypeID = '012800000002KPtAAM' GROUP BY AccountId HAVING MIN(CloseDate) >= "+w+" AND MIN(CloseDate) <= "+y,sqlObj={key:D,query:"first time donors  Second FY before selected",sql:h},f.push(sqlObj),D="m1",h="SELECT  COUNT(Id), SUM(Amount) FROM Opportunity WHERE StageName = 'Posted' AND RecordTypeID = '012800000002KPtAAM' AND CloseDate >="+k+" AND CloseDate < ="+l+" GROUP BY AccountId HAVING ( SUM(Amount) <= 95 )  ",sqlObj={key:D,query:"BASE donors Selected YTD",sql:h},f.push(sqlObj),D="m2",h="SELECT  COUNT(Id), SUM(Amount) FROM Opportunity WHERE  StageName = 'Posted' AND RecordTypeID = '012800000002KPtAAM' AND CloseDate >= "+m+" AND CloseDate < ="+n+" GROUP BY AccountId HAVING ( SUM(Amount) <= 95  )  ",sqlObj={key:D,query:"BASE donors Selected YTD -1",sql:h},f.push(sqlObj),D="m3",h="SELECT  COUNT(Id), SUM(Amount) FROM Opportunity WHERE  StageName = 'Posted' AND RecordTypeID = '012800000002KPtAAM' AND  CloseDate >= "+o+" AND CloseDate < ="+p+" GROUP BY AccountId HAVING ( SUM(Amount) <= 95 )  ",sqlObj={key:D,query:"BASE donors Selected YTD -2",sql:h},f.push(sqlObj),D="m4",h="SELECT  COUNT(Id), SUM(Amount) FROM Opportunity WHERE  StageName = 'Posted' AND RecordTypeID = '012800000002KPtAAM' AND  CloseDate >= "+u+" AND CloseDate < ="+v+" GROUP BY AccountId HAVING ( SUM(Amount) <= 95 )  ",sqlObj={key:D,query:"BASE donors first FY before selected",sql:h},f.push(sqlObj),D="m5",h="SELECT  COUNT(Id), SUM(Amount) FROM Opportunity WHERE  StageName = 'Posted' AND RecordTypeID = '012800000002KPtAAM' AND  CloseDate >= "+w+" AND CloseDate < ="+y+" GROUP BY AccountId HAVING ( SUM(Amount) <= 95 )  ",sqlObj={key:D,query:"BASE donors SECOND FY before selected",sql:h},f.push(sqlObj),D="n1",h="SELECT  COUNT(Id), SUM(Amount) FROM Opportunity WHERE  StageName = 'Posted' AND RecordTypeID = '012800000002KPtAAM' AND  CloseDate >= "+k+" AND CloseDate < ="+l+" GROUP BY AccountId HAVING ( SUM(Amount) < 400 AND SUM(Amount) > 95 )  ",sqlObj={key:D,query:"INTERMEDIATE donors Selected YTD",sql:h},f.push(sqlObj),D="n2",h="SELECT  COUNT(Id), SUM(Amount) FROM Opportunity WHERE  StageName = 'Posted' AND RecordTypeID = '012800000002KPtAAM' AND  CloseDate >= "+m+" AND CloseDate < ="+n+" GROUP BY AccountId HAVING ( SUM(Amount) < 400 AND SUM(Amount) > 95 )  ",sqlObj={key:D,query:"INTERMEDIATE donors Selected YTD -1",sql:h},f.push(sqlObj),D="n3",h="SELECT  COUNT(Id), SUM(Amount) FROM Opportunity WHERE  StageName = 'Posted' AND RecordTypeID = '012800000002KPtAAM' AND  CloseDate >= "+o+" AND CloseDate < ="+p+" GROUP BY AccountId HAVING ( SUM(Amount) < 400 AND SUM(Amount) > 95 )  ",sqlObj={key:D,query:"INTERMEDIATE donors Selected YTD -2",sql:h},f.push(sqlObj),D="n4",h="SELECT  COUNT(Id), SUM(Amount) FROM Opportunity WHERE  StageName = 'Posted' AND RecordTypeID = '012800000002KPtAAM' AND  CloseDate >= "+u+" AND CloseDate < ="+v+" GROUP BY AccountId HAVING ( SUM(Amount) < 400 AND SUM(Amount) > 95 ) ",sqlObj={key:D,query:"INTERMEDIATE donors first FY before selected",sql:h},f.push(sqlObj),D="n5",h="SELECT  COUNT(Id), SUM(Amount) FROM Opportunity WHERE  StageName = 'Posted' AND RecordTypeID = '012800000002KPtAAM' AND  CloseDate >= "+w+" AND CloseDate < ="+y+" GROUP BY AccountId HAVING ( SUM(Amount) < 400 AND SUM(Amount) > 95 )  ",sqlObj={key:D,query:"INTERMEDIATE donors SECOND FY before selected",sql:h},f.push(sqlObj),D="o1",h="SELECT  COUNT(Id), SUM(Amount) FROM Opportunity WHERE  StageName = 'Posted' AND RecordTypeID = '012800000002KPtAAM' AND  CloseDate >= "+k+" AND CloseDate < ="+l+" GROUP BY AccountId HAVING ( SUM(Amount) < 1000 AND SUM(Amount) >= 400 )  ",sqlObj={key:D,query:"LARGE donors Selected YTD",sql:h},f.push(sqlObj),D="o2",h="SELECT  COUNT(Id), SUM(Amount) FROM Opportunity WHERE  StageName = 'Posted' AND RecordTypeID = '012800000002KPtAAM' AND  CloseDate >= "+m+" AND CloseDate < ="+n+" GROUP BY AccountId HAVING ( SUM(Amount) < 1000 AND SUM(Amount) >= 400 )  ",sqlObj={key:D,query:"LARGE donors Selected YTD -1",sql:h},f.push(sqlObj),D="o3",h="SELECT  COUNT(Id), SUM(Amount) FROM Opportunity WHERE  StageName = 'Posted' AND RecordTypeID = '012800000002KPtAAM' AND  CloseDate >= "+o+" AND CloseDate < ="+p+" GROUP BY AccountId HAVING ( SUM(Amount) < 1000 AND SUM(Amount) >= 400 )  ",sqlObj={key:D,query:"LARGE donors Selected YTD -2",sql:h},f.push(sqlObj),D="o4",h="SELECT  COUNT(Id), SUM(Amount) FROM Opportunity WHERE  StageName = 'Posted' AND RecordTypeID = '012800000002KPtAAM' AND  CloseDate >= "+u+" AND CloseDate < ="+v+" GROUP BY AccountId HAVING ( SUM(Amount) < 1000 AND SUM(Amount) >= 400 ) ",sqlObj={key:D,query:"LARGE donors first FY before selected",sql:h},f.push(sqlObj),D="o5",h="SELECT   COUNT(Id), SUM(Amount) FROM Opportunity WHERE  StageName = 'Posted' AND RecordTypeID = '012800000002KPtAAM' AND  CloseDate >= "+w+" AND CloseDate < ="+y+" GROUP BY AccountId HAVING ( SUM(Amount) < 1000 AND SUM(Amount) >= 400 )  ",sqlObj={key:D,query:"LARGE donors SECOND FY before selected",sql:h},f.push(sqlObj),D="p1",h="SELECT  COUNT(Id), SUM(Amount) FROM Opportunity WHERE  StageName = 'Posted' AND RecordTypeID = '012800000002KPtAAM' AND  CloseDate >= "+k+" AND CloseDate < ="+l+" GROUP BY AccountId HAVING (  SUM(Amount) >= 1000 )  ",sqlObj={key:D,query:"MAJOR donors Selected YTD",sql:h},f.push(sqlObj),D="p2",h="SELECT  COUNT(Id), SUM(Amount) FROM Opportunity WHERE  StageName = 'Posted' AND RecordTypeID = '012800000002KPtAAM' AND  CloseDate >= "+m+" AND CloseDate < ="+n+" GROUP BY AccountId HAVING (  SUM(Amount) >= 1000 )  ",sqlObj={key:D,query:"MAJOR donors Selected YTD -1",sql:h},f.push(sqlObj),D="p3",h="SELECT  COUNT(Id), SUM(Amount) FROM Opportunity WHERE  StageName = 'Posted' AND RecordTypeID = '012800000002KPtAAM' AND  CloseDate >= "+o+" AND CloseDate < ="+p+" GROUP BY AccountId HAVING (  SUM(Amount) >= 1000 )  ",sqlObj={key:D,query:"MAJOR donors Selected YTD -2",sql:h},f.push(sqlObj),D="p4",h="SELECT  COUNT(Id), SUM(Amount) FROM Opportunity WHERE  StageName = 'Posted' AND RecordTypeID = '012800000002KPtAAM' AND  CloseDate >= "+u+" AND CloseDate < ="+v+" GROUP BY AccountId HAVING (  SUM(Amount) >= 1000 )  ",sqlObj={key:D,query:"MAJOR donors first FY before selected",sql:h},f.push(sqlObj),D="p5",h="SELECT   COUNT(Id), SUM(Amount) FROM Opportunity WHERE  StageName = 'Posted' AND RecordTypeID = '012800000002KPtAAM' AND  CloseDate >= "+w+" AND CloseDate < ="+y+" GROUP BY AccountId HAVING (  SUM(Amount) >= 1000 )  ",sqlObj={key:D,query:"MAJOR donors SECOND FY before selected",sql:h},f.push(sqlObj),D="q1",h="SELECT  COUNT(Id), SUM(Amount) FROM Opportunity WHERE  StageName = 'Posted' AND RecordTypeID = '012800000002KPtAAM' AND  CloseDate >= "+k+" AND CloseDate < ="+l+" GROUP BY AccountId HAVING (  SUM(Amount) >= 0 )  ",sqlObj={key:D,query:"TOTAL donors Selected YTD",sql:h},f.push(sqlObj),D="q2",h="SELECT  COUNT(Id), SUM(Amount) FROM Opportunity WHERE  StageName = 'Posted' AND RecordTypeID = '012800000002KPtAAM' AND  CloseDate >= "+m+" AND CloseDate < ="+n+" GROUP BY AccountId HAVING (  SUM(Amount) >= 0 )  ",sqlObj={key:D,query:"TOTAL donors Selected YTD -1",sql:h},f.push(sqlObj),D="q3",h="SELECT  COUNT(Id), SUM(Amount) FROM Opportunity WHERE  StageName = 'Posted' AND RecordTypeID = '012800000002KPtAAM' AND  CloseDate >= "+o+" AND CloseDate < ="+p+" GROUP BY AccountId HAVING (  SUM(Amount) >= 0 )  ",sqlObj={key:D,query:"TOTAL donors Selected YTD -2",sql:h},f.push(sqlObj),D="q4",h="SELECT  COUNT(Id), SUM(Amount) FROM Opportunity WHERE  StageName = 'Posted' AND RecordTypeID = '012800000002KPtAAM' AND  CloseDate >= "+u+" AND CloseDate < ="+v+" GROUP BY AccountId HAVING (  SUM(Amount) >= 0 )  ",sqlObj={key:D,query:"TOTAL donors first FY before selected",sql:h},f.push(sqlObj),D="q5",h="SELECT   COUNT(Id), SUM(Amount) FROM Opportunity WHERE  StageName = 'Posted' AND RecordTypeID = '012800000002KPtAAM' AND  CloseDate >= "+w+" AND CloseDate < ="+y+" GROUP BY AccountId HAVING (  SUM(Amount) >= 0 )  ",sqlObj={key:D,query:"TOTAL donors SECOND FY before selected",sql:h},f.push(sqlObj),D="d1a",h="SELECT Id, Name FROM Account WHERE Id IN (SELECT AccountId FROM Opportunity WHERE StageName = 'Posted' AND RecordTypeID = '012800000002KPtAAM' AND CloseDate > "+k+" AND CloseDate < "+l+")",h+="AND  Id IN (SELECT AccountId FROM Opportunity WHERE StageName = 'Posted' AND RecordTypeID = '012800000002KPtAAM' AND CloseDate > "+m+" AND CloseDate < "+n+") ",sqlObj={key:D,query:"donated ytd and ytdm1",sql:h},f.push(sqlObj),D="d1b",h="SELECT Id, Name FROM Account WHERE Id IN (SELECT AccountId FROM Opportunity WHERE StageName = 'Posted' AND RecordTypeID = '012800000002KPtAAM' AND CloseDate > "+k+" AND CloseDate < "+l+")",h+="AND  Id IN (SELECT AccountId FROM Opportunity WHERE StageName = 'Posted' AND RecordTypeID = '012800000002KPtAAM' AND CloseDate > "+o+" AND CloseDate < "+p+") ",sqlObj={key:D,query:"donated ytd and ytdm2",sql:h},f.push(sqlObj),D="d2a",h="SELECT Id, Name FROM Account WHERE Id IN (SELECT AccountId FROM Opportunity WHERE StageName = 'Posted' AND RecordTypeID = '012800000002KPtAAM' AND CloseDate > "+m+" AND CloseDate < "+n+")",h+="AND  Id IN (SELECT AccountId FROM Opportunity WHERE StageName = 'Posted' AND RecordTypeID = '012800000002KPtAAM' AND CloseDate > "+o+" AND CloseDate < "+p+") ",sqlObj={key:D,query:"donated ytdm1 and ytdm2",sql:h},f.push(sqlObj),D="d2b",h="SELECT Id, Name FROM Account WHERE Id IN (SELECT AccountId FROM Opportunity WHERE StageName = 'Posted' AND RecordTypeID = '012800000002KPtAAM' AND CloseDate > "+m+" AND CloseDate < "+n+")",h+="AND  Id IN (SELECT AccountId FROM Opportunity WHERE StageName = 'Posted' AND RecordTypeID = '012800000002KPtAAM' AND CloseDate > "+q+" AND CloseDate < "+r+") ",sqlObj={key:D,query:"donated y2dm1 and ytdm3",sql:h},f.push(sqlObj),D="d3a",h="SELECT Id, Name FROM Account WHERE Id IN (SELECT AccountId FROM Opportunity WHERE StageName = 'Posted' AND RecordTypeID = '012800000002KPtAAM' AND CloseDate > "+o+" AND CloseDate < "+p+")",h+="AND  Id IN (SELECT AccountId FROM Opportunity WHERE StageName = 'Posted' AND RecordTypeID = '012800000002KPtAAM' AND CloseDate > "+q+" AND CloseDate < "+r+") ",sqlObj={key:D,query:"donated y2dm2 and ytdm3",sql:h},f.push(sqlObj),D="d3b",h="SELECT Id, Name FROM Account WHERE Id IN (SELECT AccountId FROM Opportunity WHERE StageName = 'Posted' AND RecordTypeID = '012800000002KPtAAM' AND CloseDate > "+o+" AND CloseDate < "+p+")",h+="AND  Id IN (SELECT AccountId FROM Opportunity WHERE StageName = 'Posted' AND RecordTypeID = '012800000002KPtAAM' AND CloseDate > "+s+" AND CloseDate < "+t+") ",sqlObj={key:D,query:"donated y2dm2 and ytdm4",sql:h},f.push(sqlObj),D="d4a",h="SELECT Id, Name FROM Account WHERE Id IN (SELECT AccountId FROM Opportunity WHERE StageName = 'Posted' AND RecordTypeID = '012800000002KPtAAM' AND CloseDate > "+u+" AND CloseDate < "+v+")",h+="AND  Id IN (SELECT AccountId FROM Opportunity WHERE StageName = 'Posted' AND RecordTypeID = '012800000002KPtAAM' AND CloseDate > "+w+" AND CloseDate < "+y+") ",sqlObj={key:D,query:"donated fym1 and fym2",sql:h},f.push(sqlObj),D="d4b",h="SELECT Id, Name FROM Account WHERE Id IN (SELECT AccountId FROM Opportunity WHERE StageName = 'Posted' AND RecordTypeID = '012800000002KPtAAM' AND CloseDate > "+u+" AND CloseDate < "+v+")",h+="AND  Id IN (SELECT AccountId FROM Opportunity WHERE StageName = 'Posted' AND RecordTypeID = '012800000002KPtAAM' AND CloseDate > "+z+" AND CloseDate < "+A+") ",sqlObj={key:D,query:"donated fym1 and fym3",sql:h},f.push(sqlObj),D="d5a",h="SELECT Id, Name FROM Account WHERE Id IN (SELECT AccountId FROM Opportunity WHERE StageName = 'Posted' AND RecordTypeID = '012800000002KPtAAM' AND CloseDate > "+w+" AND CloseDate < "+y+")",h+="AND  Id IN (SELECT AccountId FROM Opportunity WHERE StageName = 'Posted' AND RecordTypeID = '012800000002KPtAAM' AND CloseDate > "+z+" AND CloseDate < "+A+") ",sqlObj={key:D,query:"donated fym2 and fym3",sql:h},f.push(sqlObj),D="d5b",h="SELECT Id, Name FROM Account WHERE Id IN (SELECT AccountId FROM Opportunity WHERE StageName = 'Posted' AND RecordTypeID = '012800000002KPtAAM' AND CloseDate > "+w+" AND CloseDate < "+y+")",h+="AND  Id IN (SELECT AccountId FROM Opportunity WHERE StageName = 'Posted' AND RecordTypeID = '012800000002KPtAAM' AND CloseDate > "+B+" AND CloseDate < "+C+") ",sqlObj={key:D,query:"donated fym2 and fym4",sql:h},f.push(sqlObj),D="e1a",h="SELECT Id, Name FROM Account WHERE Id NOT IN (SELECT AccountId FROM Opportunity WHERE StageName = 'Posted' AND RecordTypeID = '012800000002KPtAAM' AND CloseDate > "+k+" AND CloseDate < "+l+")",h+="AND  Id IN (SELECT AccountId FROM Opportunity WHERE StageName = 'Posted' AND RecordTypeID = '012800000002KPtAAM' AND CloseDate > "+m+" AND CloseDate < "+n+") ",sqlObj={key:D,query:"NOT donated ytd and ytdm1",sql:h},f.push(sqlObj),D="e1b",h="SELECT Id, Name FROM Account WHERE Id NOT IN (SELECT AccountId FROM Opportunity WHERE StageName = 'Posted' AND RecordTypeID = '012800000002KPtAAM' AND CloseDate > "+k+" AND CloseDate < "+l+")",h+="AND  Id IN (SELECT AccountId FROM Opportunity WHERE StageName = 'Posted' AND RecordTypeID = '012800000002KPtAAM' AND CloseDate > "+o+" AND CloseDate < "+p+") ",sqlObj={key:D,query:"NOT donated ytd and ytdm2",sql:h},f.push(sqlObj),D="e2a",h="SELECT Id, Name FROM Account WHERE Id NOT IN (SELECT AccountId FROM Opportunity WHERE StageName = 'Posted' AND RecordTypeID = '012800000002KPtAAM' AND CloseDate > "+m+" AND CloseDate < "+n+")",h+="AND  Id IN (SELECT AccountId FROM Opportunity WHERE StageName = 'Posted' AND RecordTypeID = '012800000002KPtAAM' AND CloseDate > "+o+" AND CloseDate < "+p+") ",sqlObj={key:D,query:"NOT donated ytdm1 and ytdm2",sql:h},f.push(sqlObj),D="e2b",h="SELECT Id, Name FROM Account WHERE Id NOT IN (SELECT AccountId FROM Opportunity WHERE StageName = 'Posted' AND RecordTypeID = '012800000002KPtAAM' AND CloseDate > "+m+" AND CloseDate < "+n+")",h+="AND  Id IN (SELECT AccountId FROM Opportunity WHERE StageName = 'Posted' AND RecordTypeID = '012800000002KPtAAM' AND CloseDate > "+q+" AND CloseDate < "+r+") ",sqlObj={key:D,query:"NOT donated y2dm1 and ytdm3",sql:h},f.push(sqlObj),D="e3a",h="SELECT Id, Name FROM Account WHERE Id NOT IN (SELECT AccountId FROM Opportunity WHERE StageName = 'Posted' AND RecordTypeID = '012800000002KPtAAM' AND CloseDate > "+o+" AND CloseDate < "+p+")",h+="AND  Id IN (SELECT AccountId FROM Opportunity WHERE StageName = 'Posted' AND RecordTypeID = '012800000002KPtAAM' AND CloseDate > "+q+" AND CloseDate < "+r+") ",sqlObj={key:D,query:"NOT donated y2dm2 and ytdm3",sql:h},f.push(sqlObj),D="e3b",h="SELECT Id, Name FROM Account WHERE Id NOT IN (SELECT AccountId FROM Opportunity WHERE StageName = 'Posted' AND RecordTypeID = '012800000002KPtAAM' AND CloseDate > "+o+" AND CloseDate < "+p+")",h+="AND  Id IN (SELECT AccountId FROM Opportunity WHERE StageName = 'Posted' AND RecordTypeID = '012800000002KPtAAM' AND CloseDate > "+s+" AND CloseDate < "+t+") ",sqlObj={key:D,query:"NOT donated y2dm2 and ytdm4",sql:h},f.push(sqlObj),D="e4a",h="SELECT Id, Name FROM Account WHERE Id NOT IN (SELECT AccountId FROM Opportunity WHERE StageName = 'Posted' AND RecordTypeID = '012800000002KPtAAM' AND CloseDate > "+u+" AND CloseDate < "+v+")",h+="AND  Id IN (SELECT AccountId FROM Opportunity WHERE StageName = 'Posted' AND RecordTypeID = '012800000002KPtAAM' AND CloseDate > "+w+" AND CloseDate < "+y+") ",sqlObj={key:D,query:"NOT donated fym1 and fym2",sql:h},f.push(sqlObj),D="e4b",h="SELECT Id, Name FROM Account WHERE Id NOT IN (SELECT AccountId FROM Opportunity WHERE StageName = 'Posted' AND RecordTypeID = '012800000002KPtAAM' AND CloseDate > "+u+" AND CloseDate < "+v+")",h+="AND  Id IN (SELECT AccountId FROM Opportunity WHERE StageName = 'Posted' AND RecordTypeID = '012800000002KPtAAM' AND CloseDate > "+z+" AND CloseDate < "+A+") ",sqlObj={key:D,query:"NOT donated fym1 and fym3",sql:h},f.push(sqlObj),D="e5a",h="SELECT Id, Name FROM Account WHERE Id NOT IN (SELECT AccountId FROM Opportunity WHERE StageName = 'Posted' AND RecordTypeID = '012800000002KPtAAM' AND CloseDate > "+w+" AND CloseDate < "+y+")",h+="AND  Id IN (SELECT AccountId FROM Opportunity WHERE StageName = 'Posted' AND RecordTypeID = '012800000002KPtAAM' AND CloseDate > "+z+" AND CloseDate < "+A+") ",sqlObj={key:D,query:"NOT donated fym2 and fym3",sql:h},f.push(sqlObj),D="e5b",h="SELECT Id, Name FROM Account WHERE Id NOT IN (SELECT AccountId FROM Opportunity WHERE StageName = 'Posted' AND RecordTypeID = '012800000002KPtAAM' AND CloseDate > "+w+" AND CloseDate < "+y+")",h+="AND  Id IN (SELECT AccountId FROM Opportunity WHERE StageName = 'Posted' AND RecordTypeID = '012800000002KPtAAM' AND CloseDate > "+B+" AND CloseDate < "+C+") ",sqlObj={key:D,query:"NOT donated fym2 and fym4",sql:h},f.push(sqlObj);var E=function(b){c.accessToken?(console.log("DID NOT reauthroize"),F()):(console.log("I want to do a check in getSalesforce to see if I need to auth. ",c.accessToken),a.get("/salesforce/force").then(function(a){c.response=a.data,c.accessToken=a.data.accessToken,c.instanceUrl=a.data.instanceUrl,F()}))},F=function(b){return console.log("in fetch force, forceResult=",b),b&&(e.push(b.data),g=e.length,console.log("sql index",g),e.length==f.length)?(console.log("Hey! In fetchForce in queryService, I think we are done!"),d.arrResults=e,void G()):(console.log("getting ready to get in fetch. sqlIndex=",g,"arrSql[sqlIndex]=",f[g].sql),void a.get("/salesforce/fetch",{params:{accessToken:c.accessToken,instanceUrl:c.instanceUrl,key:f[g].key,strSql:f[g].sql,queryInfo:f[g].query}}).then(function(a){F(a)}))},G=function(){var a=H("m1"),b=H("m2"),c=H("m3"),d=H("m4"),e=H("m5");console.log("totalBaseSelYTD =",a),console.log("totalBaseSelYTDm1 =",b),console.log("totalBaseSelYTDm2 =",c),console.log("totalBaseFYm1 =",d),console.log("totalBaseFYm2 =",e);var f=H("n1"),g=H("n2"),h=H("n3"),i=H("n4"),j=H("n5");console.log("totalInterSelYTD =",f),console.log("totalInterSelYTDm1 =",g),console.log("totalInterSelYTDm2 =",h),console.log("totalInterFYm1 =",i),console.log("totalInterFYm2 =",j);var k=H("o1"),l=H("o2"),m=H("o3"),n=H("o4"),o=H("o5");console.log("totalLargeSelYTD =",k),console.log("totalLargeSelYTDm1 =",l),console.log("totalLargeSelYTDm2 =",m),console.log("totalLargeFYm1 =",n),console.log("totalLargeFYm2 =",o);var p=H("p1"),q=H("p2"),r=H("p3"),s=H("p4"),t=H("p5");console.log("totalMajorSelYTD =",p),console.log("totalMajorSelYTDm1 =",q),console.log("totalMajorSelYTDm2 =",r),console.log("totalMajorFYm1 =",s),console.log("totalMajorFYm2 =",t);var u=H("q1"),v=H("q2"),w=H("q3"),x=H("q4"),y=H("q5");console.log("totalAllSelYTD =",u),console.log("totalAllSelYTDm1 =",v),console.log("totalAllSelYTDm2 =",w),console.log("totalAllFYm1 =",x),console.log("totalAllFYm2 =",y);var z=K("c1"),A=K("c2"),B=K("c3"),C=K("c4"),D=K("c5");console.log("ftdYTD",z),console.log("ftdYTDm1",A),console.log("ftdYTDm2",B),console.log("ftdFym1",C),console.log("ftdFym2",D);var E=I("d1a","d1b"),F=I("d2a","d2b"),G=I("d3a","d3b"),L=I("d4a","d4b"),M=I("d5a","d5b");console.log("crdSelYTD",E),console.log("crdSelYTDm1",F),console.log("crdSelYTDm1",G),console.log("crdFym1",L),console.log("crdFym2",M);var N=J("e1a","e1b"),O=J("e2a","e2b"),P=J("e3a","e3b"),Q=J("e4a","e4b"),R=J("e5a","e5b");console.log("l2ybntyYTD",N),console.log("l2ybntyYTDM1",O),console.log("l2ybntyYTDM2",P),console.log("l2ybntyFym1",Q),console.log("l2ybntyFym2",R);var S=z+E+N,T=A+F+O,U=B+G+P,V=C+L+Q,W=D+M+R;console.log("tcdpYTD",S),console.log("tcdpYTDm1",T),console.log("tcdpYTDm2",U),console.log("tcdpFym1",V),console.log("tcdpFym2",W)},H=function(a){for(var b=0;b<e.length;b++)if(e[b].myKey==a){var c=e[b].result.records,d=0;for(x=0;x<c.length;x++)d+=c[x].expr1;return d}},I=function(a,b){for(var c=[],d=[],f=0,g=0,h=0;h<e.length;h++)e[h].myKey==a&&(c=e[h].result.records),e[h].myKey==b&&(d=e[h].result.records);for(h=0;h<c.length;h++)for(j=0;j<d.length;j++)c[h].Name==d[j].Name&&f++;return console.log("Count of dupes",f),g=c.length+d.length-f},J=function(a,b){for(var c=[],d={},f=0;f<e.length;f++)if(e[f].myKey==a)for(d=e[f].result.records,x=0;x<d.length;x++)c.push(d[x].Id);for(f=0;f<e.length;f++)if(e[f].myKey==b)for(d=e[f].result.records,x=0;x<d.length;x++)c.push(d[x].Id);var g={},h=c.length,i=[];for(f=0;h>f;f+=1)g[c[f]]=c[f];for(f in g)i.push(g[f]);return i.length},K=function(a){for(var b=0,c=0;c<e.length;c++)e[c].myKey==a&&(b=e[c].count);return b};return{getSalesforce:E,data:b,forceData:d,forceresponse:c,arrResults:e,fetchForce:F}}]),myApp.factory("UserService",["$http",function(a){var b={},c=function(){return a.get("/getnames").then(function(a){return b.response=a.data,a.data})},d=function(b){return console.log(b),a.post("/postnames",b).then(function(a){return c()})},e=function(a){console.log("-@FACTORY userServcie.js newUser(data) = ",a)};return{getNames:c,postNames:d,newUser:e,data:b}}]);