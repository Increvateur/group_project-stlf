var myApp=angular.module("myApp",["ngRoute","ngAnimate","ui.bootstrap","smart-table"]);myApp.config(["$routeProvider","$locationProvider",function(a,b){a.when("/",{templateUrl:"assets/views/templates/home.html",controller:"HomeController"}).when("/querys",{templateUrl:"assets/views/routes/querys.html",controller:"queryController"}).otherwise({redirectTo:"/"}),b.html5Mode(!0)}]),myApp.controller("AddUserController",["$scope","UserService",function(a,b){console.log("AddUserController Works!");var c=b;a.addUser={},a.submit=function(a){console.log("@mainController.js AddUserController data (AKA: addUser: ",a),c.newUser(a)}}]),myApp.controller("AddGoalsController",["$scope","GoalService",function(a,b){console.log("HI, @CONTROLLER - AddGoalsController Works!");var c=b;a.months=["september","october","november","december","january","february","march","april","may","june","july","august"],a.addGoals={},a.saveGoals=function(a){console.log("@goalController.js data (AKA: addGoals: ",a),c.newGoals(a)}}]),myApp.controller("HomeController",["$scope","$filter","MockService",function(a,b,c){var d=c;a.rowCollection=[],a.itemsByPage=15,a.accounts=[],a.donations=[],a.campaigns=[],a.contacts=[],a.households=[],a.contacts=d.contacts,d.getContacts()}]),myApp.controller("MainController",["$scope","UserService",function(a,b){}]),myApp.controller("QueryController",["$scope","QueryService",function(a,b){console.log("QueryControllerWorks"),a.data=[],a.forceData=[],a.forceresponse=[];b.getSalesforce(),a.data=b.data,a.forceData=b.forceData,console.log("forcedata",b.forceData),console.log("forcedata arrResults",b.forceData.arrResults),a.forceresponse=b.forceresponse}]),myApp.controller("UserController",["$scope","$http","$window",function(a,b,c){a.userName="",b.get("/user").then(function(b){b.data?(a.userName=b.data.username,console.log("User Data: ",a.userName)):c.location.href="/index.html"})}]),myApp.factory("GoalService",["$http",function(a){var b=function(a){console.log("*@FACTORY goalService, newGoals(addGoals): ",a)};return{newGoals:b}}]),myApp.factory("MockService",["$http",function(a){var b={},c={},d={},e={},f={},g=function(){return a.get("mockData/accounts").then(function(a){b.object=a.data,console.log("accounts in factory get",b.object)})},h=function(){return a.get("mockData/contacts").then(function(a){d.object=a.data,console.log("contacts in factory get",d.object)})},i=function(){return a.get("mockData/campaigns").then(function(a){c.object=a.data,console.log("campaigns in factory get",c.object)})},j=function(){return a.get("mockData/donations").then(function(a){e.object=a.data,console.log("donations in factory get ",e.object)})},k=function(){return a.get("mockData/households").then(function(a){f.object=a.data,console.log("households in factory get",f.object)})};return{getAccounts:g,getCampaigns:i,getContacts:h,getDonations:j,getHouseholds:k,accounts:b,contacts:d,donations:e,campaigns:c,households:f}}]),myApp.factory("QueryService",["$http",function(a){var b={},c={},d={},e=[],f=[],g="";g="SELECT Donation_SubCategory__c, SUM(Amount) FROM  Opportunity WHERE StageName = 'Posted' AND Amount != null AND FiscalYear = 2014   GROUP BY Donation_SubCategory__c ",sqlObj={query:"money raised YTD current year",sql:g},f.push(sqlObj),g="SELECT  COUNT(Id) FROM Opportunity WHERE StageName = 'Posted' AND RecordTypeID = '012800000002KPtAAM' GROUP BY AccountId HAVING MIN(CloseDate) >= 2013-09-01 AND MIN(CloseDate) <= 2014-08-31",sqlObj={query:"first time donors  current year",sql:g},f.push(sqlObj),g="SELECT  COUNT(Id), SUM(AMount) FROM Opportunity WHERE (CloseDate > 2014-09-01 AND CloseDate < 2015-08-31) GROUP BY AccountId HAVING ( SUM(Amount) < 95)  ",sqlObj={query:"base donors current year",sql:g},f.push(sqlObj);var h=function(b){c.accessToken?(console.log("DID NOT reauthroize"),i()):(console.log("I want to do a check in getSalesforce to see if I need to auth. ",c.accessToken),a.get("/salesforce/force").then(function(a){c.response=a.data,c.accessToken=a.data.accessToken,c.instanceUrl=a.data.instanceUrl,i()}))},i=function(b){var g=0;if(console.log("in fetch force, forceResult=",b),b){var h={result:b,query:""};e.push(h),g=e.length,console.log("sql index",g),e[g].query=f[g].query,e.length==f.length&&(console.log("Hey! In fetchForce in queryService, I think we are done!"),d.arrResults=e,j())}console.log("getting ready to get in fetch. sqlIndex=",g,"arrSql[sqlIndex]=",f[g].sql),a.get("/salesforce/fetch",{params:{accessToken:c.accessToken,instanceUrl:c.instanceUrl,strSql:f[g].sql}}).then(function(a){i(a)})},j=function(){for(var a=0;a<e.length;a++)console.log("ViewData! arrResults=",e[a])};return{getSalesforce:h,data:b,forceData:d,forceresponse:c,arrResults:e,fetchForce:i}}]),myApp.factory("UserService",["$http",function(a){var b={},c=function(){return a.get("/getnames").then(function(a){return b.response=a.data,a.data})},d=function(b){return console.log(b),a.post("/postnames",b).then(function(a){return c()})},e=function(a){console.log("-@FACTORY userServcie.js newUser(data) = ",a)};return{getNames:c,postNames:d,newUser:e,data:b}}]);